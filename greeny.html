<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Greeny.ai</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #ffffff;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.chat-container {
    width: 380px;
    height: 600px;
    background: #eef4f1;
    border-radius: 20px;
    box-shadow: 0 12px 25px rgba(0,0,0,0.15);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.chat-header {
    background: #0f3d2e;
    color: white;
    padding: 16px;
    text-align: center;
}

.chat-header h1 {
    margin: 0;
    font-size: 22px;
}

.chat-header p {
    margin: 4px 0 0;
    font-size: 13px;
    opacity: 0.85;
}

.chat-body {
    flex: 1;
    padding: 16px;
    overflow-y: auto;
}

.message {
    display: flex;
    margin-bottom: 14px;
}

.message.user {
    justify-content: flex-end;
}

.message.bot {
    justify-content: flex-start;
}

.bubble {
    max-width: 75%;
    padding: 12px 14px;
    font-size: 14px;
    line-height: 1.4;
}

.user .bubble {
    background: #2f8f5b;
    color: #ffffff;
    border-radius: 16px;
    border-bottom-right-radius: 4px;
}

.bot .bubble {
    background: #ffffff;
    color: #1f2933;
    border-radius: 16px;
    border-bottom-left-radius: 4px;
}

.chat-input {
    display: flex;
    gap: 10px;
    padding: 14px;
    background: #ffffff;
    border-top: 1px solid #ddd;
    align-items: center;
}

.chat-input input[type="text"] {
    flex: 1;
    padding: 12px 14px;
    border-radius: 24px;
    border: 1px solid #ccc;
    outline: none;
    font-size: 14px;
}

.upload-btn {
    background: #2f8f5b;
    color: white;
    width: 38px;
    height: 38px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 16px;
}

.chat-input button {
    background: #2f8f5b;
    color: white;
    border: none;
    border-radius: 24px;
    padding: 10px 18px;
    font-size: 14px;
    cursor: pointer;
}

.chat-input button:hover,
.upload-btn:hover {
    background: #257a4b;
}
</style>
</head>

<body>

<div class="chat-container">

    <div class="chat-header">
        <h1>Greeny ğŸ¤–</h1>
        <p>Online â€¢ AI Powered</p>
    </div>

    <div class="chat-body" id="chatBody">
        <div class="message bot">
            <div class="bubble">
                Hi! Iâ€™m Greeny ğŸŒ±<br>
                Ask me anything about waste segregation and recycling.
            </div>
        </div>
    </div>

    <div class="chat-input">
        <label for="imageInput" class="upload-btn">ğŸ“·</label>
        <input type="file" id="imageInput" accept="image/*" hidden>

        <input type="text" id="userInput" placeholder="Ask Greeny ...">
        <button onclick="sendMessage()">Send</button>
    </div>

</div>

<script>
const chatBody = document.getElementById("chatBody");
const input = document.getElementById("userInput");

function sendMessage() {
    const message = input.value.trim();
    if (!message) return;

    appendMessage(message, "user");
    input.value = "";
    generateBotReply(message);
}

input.addEventListener("keypress", function(e) {
    if (e.key === "Enter") sendMessage();
});

function appendMessage(content, sender) {
    chatBody.innerHTML += `
        <div class="message ${sender}">
            <div class="bubble">${content}</div>
        </div>
    `;
    chatBody.scrollTop = chatBody.scrollHeight;
}

function generateBotReply(message) {
    const msg = message.toLowerCase();
    let result = analyzeWaste(msg);

    setTimeout(() => {
        appendMessage(result, "bot");
    }, 600);
}

function analyzeWaste(text) {

    let wasteData = null;

    // â™»ï¸ PLASTIC
    if (text.includes("plastic") || text.includes("bottle") || text.includes("polythene")) {
        wasteData = {
            type: "Plastic (Dry Recyclable)",
            bin: "Blue Bin (Dry Waste)",
            future: "Recycled into new bottles, plastic furniture, or textile fiber.",
            coins: 5
        };
    }

    // ğŸ¥¬ FOOD / WET
    else if (text.includes("food") || text.includes("vegetable") || text.includes("kitchen") || text.includes("leftover")) {
        wasteData = {
            type: "Organic / Wet Waste",
            bin: "Green Bin (Wet Waste)",
            future: "Converted into compost or biogas.",
            coins: 3
        };
    }

    // ğŸ”‹ E-WASTE
    else if (text.includes("battery") || text.includes("mobile") || text.includes("charger") || text.includes("electronic")) {
        wasteData = {
            type: "E-Waste (Hazardous)",
            bin: "Red Bin / E-Waste Collection Center",
            future: "Metals like copper & lithium extracted and reused.",
            coins: 10
        };
    }

    // ğŸ§» PAPER
    else if (text.includes("paper") || text.includes("cardboard") || text.includes("newspaper")) {
        wasteData = {
            type: "Paper (Dry Recyclable)",
            bin: "Blue Bin (Dry Waste)",
            future: "Recycled into notebooks, cartons, packaging material.",
            coins: 4
        };
    }

    // ğŸ¥« METAL
    else if (text.includes("can") || text.includes("aluminium") || text.includes("metal")) {
        wasteData = {
            type: "Metal Waste",
            bin: "Blue Bin (Dry Waste)",
            future: "Melted and reused in manufacturing.",
            coins: 7
        };
    }

    if (wasteData) {
        return `
            <b>ğŸ” Waste Analysis Report</b><br><br>

            <b>ğŸ“¦ Type:</b> ${wasteData.type}<br>
            <b>ğŸ—‘ Dispose In:</b> ${wasteData.bin}<br>
            <b>ğŸ”„ Future Use:</b> ${wasteData.future}<br>
            <b>ğŸª™ Green Coins Earned:</b> ${wasteData.coins} Coins<br><br>

            â™»ï¸ Thank you for recycling responsibly!
        `;
    }

    return `
        <b>âš ï¸ Unable to Identify Waste</b><br><br>
        Please mention the material type like:<br>
        â€¢ Plastic bottle<br>
        â€¢ Food waste<br>
        â€¢ Battery<br>
        â€¢ Paper<br>
        â€¢ Metal can<br><br>
        This helps calculate accurate Green Coins.
    `;
}

document.getElementById("imageInput").addEventListener("change", function() {
    const file = this.files[0];
    if (!file) return;

    const imgURL = URL.createObjectURL(file);

    appendMessage(
        `<img src="${imgURL}" style="max-width:100%; border-radius:10px;">`,
        "user"
    );

    // Simulated AI Image Detection
    setTimeout(() => {
        appendMessage(`
            <b>ğŸ–¼ AI Image Analysis</b><br><br>
            ğŸ“¦ Type: Plastic Bottle (Dry Waste)<br>
            ğŸ—‘ Dispose In: Blue Bin<br>
            ğŸ”„ Future Use: Recycled into polyester fiber<br>
            ğŸª™ Green Coins Earned: 5 Coins<br><br>
            â™»ï¸ Image processed successfully.
        `, "bot");
    }, 800);
});
</script>


</body>
</html>
